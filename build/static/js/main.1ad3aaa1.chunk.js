(this.webpackJsonpexpertize=this.webpackJsonpexpertize||[]).push([[0],{103:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),l=t(82),u=t.n(l),c=t(11),o=function(){return r.a.createElement("div",null)},i=t(35),s=t(52),m=t(81),p=t(39),E=t(15);function b(){var e=Object(p.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      currentUser {\n        username\n      }\n    }\n  }\n"]);return b=function(){return e},e}function f(){var e=Object(p.a)(["\n  mutation signup(\n    $username: String!\n    $password: String!\n    $name: String!\n    $email: String!\n  ) {\n    signup(\n      username: $username\n      password: $password\n      name: $name\n      email: $email\n    ) {\n      token\n      currentUser {\n        username\n      }\n    }\n  }\n"]);return f=function(){return e},e}var v=Object(E.a)(f()),d=Object(E.a)(b()),g=function(e){var n=Object(a.useState)(""),t=Object(s.a)(n,2),r=t[0],l=t[1];return{type:e,value:r,onChange:function(e){l(e.target.value)},reset:function(){l("")}}},j=t(77);function O(){var e=Object(p.a)(["\n  query currentUser {\n    currentUser {\n      name\n      username\n      email\n    }\n  }\n"]);return O=function(){return e},e}function h(){var e=Object(p.a)(["\n  query allResumes {\n    allResumes {\n      title\n      date\n      data\n      likes\n      description\n      tags\n      user\n    }\n  }\n"]);return h=function(){return e},e}function w(){var e=Object(p.a)(["\n  query allUsers {\n    allUsers {\n      name\n      username\n      email\n    }\n  }\n"]);return w=function(){return e},e}Object(E.a)(w()),Object(E.a)(h());var S=Object(E.a)(O()),y=function(e){var n=Object(j.a)();if(e){var t=e[Object.keys(e)[0]],a=t.token,r=t.currentUser;return localStorage.setItem("expertize-user-token",a),n.writeQuery({query:S,data:{currentUser:r}}),{token:a,currentUser:r}}return null},k=function(){var e=Object(m.a)(v,{onError:function(e){}}),n=Object(s.a)(e,2),t=n[0],l=n[1].data,u=g("text"),o=u.reset,p=Object(i.a)(u,["reset"]),E=g("password"),b=E.reset,f=Object(i.a)(E,["reset"]),d=g("text"),j=d.reset,O=Object(i.a)(d,["reset"]),h=g("text"),w=h.reset,S=Object(i.a)(h,["reset"]),k=y(l),U=Object(c.f)();Object(a.useEffect)((function(){k&&(U.push("/"),o(),b(),j(),w())}),[k]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Signup"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({variables:{username:p.value,password:f.value,email:O.value,name:S.value}})}},r.a.createElement("div",null,"username:",r.a.createElement("input",p)),r.a.createElement("div",null,"email:",r.a.createElement("input",O)),r.a.createElement("div",null,"name:",r.a.createElement("input",S)),r.a.createElement("div",null,"password:",r.a.createElement("input",f)),r.a.createElement("button",{type:"submit"},"Sign Up")))},U=function(){var e=Object(c.f)(),n=Object(m.a)(d,{onError:function(e){}}),t=Object(s.a)(n,2),l=t[0],u=t[1].data,o=g("text"),p=o.reset,E=Object(i.a)(o,["reset"]),b=g("password"),f=b.reset,v=Object(i.a)(b,["reset"]),j=y(u);Object(a.useEffect)((function(){j&&(e.push("/"),p(),f())}),[j]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l({variables:{email:E.value,password:v.value}})}},r.a.createElement("div",null,"email:",r.a.createElement("input",E)),r.a.createElement("div",null,"password:",r.a.createElement("input",v)),r.a.createElement("button",{type:"submit"},"Login")))},$=function(){return r.a.createElement("div",null,"Logged In!")},x=t(80),L=t(25),q=function(){var e=Object(j.a)();return r.a.createElement(L.b,{to:"/",onClick:function(){localStorage.clear(),e.resetStore()}},"Logout")},z=function(){var e={paddingRight:5},n=Object(j.a)().readQuery({query:S}).currentUser;return r.a.createElement("div",null,r.a.createElement(L.b,{style:e,to:"/"},"Home"),n?r.a.createElement("span",null,"Welcome ",n.name,r.a.createElement(q,null)):r.a.createElement("span",null,r.a.createElement(L.b,{style:e,to:"/signup"},"Sign Up"),r.a.createElement(L.b,{style:e,to:"/login"},"Login")))};var I=function(){var e=Object(x.a)(S),n=e.loading,t=e.data;return n?null:r.a.createElement("div",null,r.a.createElement(z,null),t.currentUser?r.a.createElement($,null):r.a.createElement(o,null),r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/signup"},r.a.createElement(k,null)),r.a.createElement(c.a,{path:"/login"},r.a.createElement(U,null)),r.a.createElement(c.a,{path:"/"},r.a.createElement(o,null))))},Q=t(56),R=t(57),C=t(79),D=t(21),J=t(85),B=Object(J.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.path;return console.error("[GraphQL error]: Message: ".concat(n,", Path: ").concat(t))})),t&&console.error("[Network error]: ".concat(t))})),G=t(74),H=t(86),M=Object(H.a)((function(e,n){var t=n.headers,a=localStorage.getItem("expertize-user-token");return{headers:Object(G.a)(Object(G.a)({},t),{},{authorization:a?"bearer ".concat(a):null})}})),N=new(t(44).a)({uri:"/graphql"}),P=D.a.from([M,B,N]),W=new Q.a({cache:new R.a,link:P});u.a.render(r.a.createElement(C.a,{client:W},r.a.createElement(L.a,null,r.a.createElement(I,null))),document.getElementById("root"))},91:function(e,n,t){e.exports=t(103)}},[[91,1,2]]]);
//# sourceMappingURL=main.1ad3aaa1.chunk.js.map